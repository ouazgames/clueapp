<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon-120x120.png" />
  <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon-152x152.png" />
  <link rel="apple-touch-icon" sizes="167x167" href="/images/favicon-167x167.png" />
  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-180x180.png" />

  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="48x48" href="/images/favicon-48x48.png" />
  <link rel="icon" type="image/png" sizes="64x64" href="/images/favicon-64x64.png" />
  <link rel="shortcut icon" href="/images/favicon.ico" />
  <link rel="stylesheet" href="common.css" />

  <meta property="og:title" content="Clues by Sam" />
  <meta property="og:image" content="https://cluesbysam.com/images/74029611514d.jpg" />
  <meta property="og:description" content="A logic puzzle where you deduce who is a criminal!" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:image" content="https://cluesbysam.com/images/74029611514d.jpg" />
  <meta name="color-scheme" content="light only" />
  <meta name="supported-color-schemes" content="light" />
  <meta name="robots" content="max-image-preview:large" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Ribeye&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800;900&display=swap" rel="stylesheet" />
  <link
    href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&display=swap"
    rel="stylesheet" />
  <title>Clues By Sam</title>
  <style>
    :root {
      --safe-area-inset-top: env(safe-area-inset-top);
      --safe-area-inset-bottom: env(safe-area-inset-bottom);
      --safe-area-inset-left: env(safe-area-inset-left);
      --safe-area-inset-right: env(safe-area-inset-right);
      --bg-light-blue: #D4EFFF;
      --bg-pink: #FFE4EC;
      --card-blue: #5DADE2;
      --card-pink: #F8A5C2;
      --card-red: #E74C3C;
      --card-green-glow: #2ECC71;
      --header-blue: #3498DB;
      --progress-gold: #F1C40F;
      --progress-bg: #2C3E50;
    }
    
    * {
      box-sizing: border-box;
      -webkit-tap-highlight-color: transparent;
    }
    
    html, body {
      height: 100%;
      overflow-x: hidden;
      overscroll-behavior: none;
      margin: 0;
      padding: 0;
    }
    
    body {
      background: linear-gradient(180deg, #A8E6CF 0%, #D4EFFF 30%, #D4EFFF 100%);
      padding-top: env(safe-area-inset-top);
      padding-bottom: calc(env(safe-area-inset-bottom) + 100px);
      padding-left: env(safe-area-inset-left);
      padding-right: env(safe-area-inset-right);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      min-height: -webkit-fill-available;
      font-family: 'Nunito', sans-serif;
    }
    
    /* ==========================================
       SPLASH SCREEN
       ========================================== */
    #splash-screen {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(180deg, #87CEEB 0%, #9B59B6 100%);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      z-index: 9999;
      transition: opacity 0.5s ease-out;
    }
    
    #splash-screen.hidden {
      opacity: 0;
      pointer-events: none;
    }
    
    .splash-logo {
      font-family: 'Ribeye', cursive;
      font-size: 48px;
      color: #fff;
      text-shadow: 3px 3px 0 #8E44AD, 5px 5px 10px rgba(0,0,0,0.3);
      text-align: center;
      margin-bottom: 20px;
    }
    
    .splash-icon {
      font-size: 80px;
      margin-bottom: 30px;
    }
    
    .splash-text {
      font-family: 'Nunito', sans-serif;
      font-size: 18px;
      color: #fff;
      margin-bottom: 20px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.3);
    }
    
    .splash-progress {
      width: 200px;
      height: 20px;
      background: #2C3E50;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.3);
    }
    
    .splash-progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #27AE60 0%, #2ECC71 100%);
      border-radius: 10px;
      transition: width 0.3s ease;
    }
    
    /* ==========================================
       HEADER WITH LEVEL AND PROGRESS
       ========================================== */
    .game-header {
      background: transparent;
      padding: 15px 20px 10px;
      text-align: center;
    }
    
    .level-title {
      font-family: 'Nunito', sans-serif;
      font-weight: 900;
      font-size: 32px;
      color: #2C3E50;
      margin: 0 0 8px 0;
      text-shadow: 1px 1px 0 #fff;
    }
    
    .progress-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
    }
    
    .progress-bar-wrapper {
      width: 180px;
      height: 28px;
      background: linear-gradient(180deg, #34495E 0%, #2C3E50 100%);
      border-radius: 14px;
      padding: 4px;
      box-shadow: 0 3px 8px rgba(0,0,0,0.3), inset 0 2px 3px rgba(0,0,0,0.2);
    }
    
    .progress-bar-fill {
      height: 100%;
      background: linear-gradient(180deg, #F4D03F 0%, #F39C12 100%);
      border-radius: 10px;
      width: 0%;
      transition: width 0.3s ease;
      box-shadow: 0 0 10px rgba(243, 156, 18, 0.5);
    }
    
    .progress-text {
      font-family: 'Nunito', sans-serif;
      font-weight: 800;
      font-size: 20px;
      color: #fff;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.5);
      position: absolute;
      width: 180px;
      text-align: center;
      line-height: 28px;
    }
    
    .progress-bar-inner {
      position: relative;
    }
    
    /* ==========================================
       GAME CONTAINER
       ========================================== */
    #root {
      flex: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 10px 5px;
      overflow-y: auto;
      -webkit-overflow-scrolling: touch;
    }
    
    /* ==========================================
       CARD STYLING OVERRIDES
       ========================================== */
    .card-grid {
      background-color: transparent !important;
    }
    
    .card {
      border-radius: 16px !important;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15), 0 2px 4px rgba(0,0,0,0.1) !important;
      border: 3px solid rgba(255,255,255,0.5) !important;
      overflow: visible !important;
    }
    
    .card-container {
      position: relative;
    }
    
    /* Position badge (A1, B1, etc) */
    .card .position-label,
    .card-container .cell-label {
      position: absolute;
      top: 5px;
      left: 5px;
      background: #2C3E50;
      color: #fff;
      font-family: 'Nunito', sans-serif;
      font-weight: 800;
      font-size: 12px;
      padding: 2px 6px;
      border-radius: 6px;
      z-index: 10;
    }
    
    /* Gender symbol styling */
    .card .gender-symbol {
      position: absolute;
      top: 5px;
      right: 5px;
      font-size: 16px;
      z-index: 10;
    }
    
    /* Criminal card - red background */
    .card.criminal,
    .card[data-criminal="true"] {
      background: linear-gradient(180deg, #E74C3C 0%, #C0392B 100%) !important;
      border-color: #922B21 !important;
    }
    
    /* Innocent card - keep original but add green check */
    .card.innocent::after {
      content: "CLEARED";
      position: absolute;
      bottom: 8px;
      left: 50%;
      transform: translateX(-50%);
      background: #27AE60;
      color: #fff;
      font-family: 'Nunito', sans-serif;
      font-weight: 700;
      font-size: 10px;
      padding: 2px 8px;
      border-radius: 10px;
    }
    
    /* Selected card - green glow */
    .card.selected,
    .card:focus {
      box-shadow: 0 0 0 4px #2ECC71, 0 4px 12px rgba(46, 204, 113, 0.4) !important;
      transform: scale(1.02);
    }
    
    /* ==========================================
       GOOD/BAD TOGGLE
       ========================================== */
    .toggle-container {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: transparent;
      padding: 20px;
      padding-bottom: calc(20px + env(safe-area-inset-bottom));
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    
    .toggle-pill {
      display: flex;
      align-items: center;
      background: linear-gradient(180deg, #BDC3C7 0%, #95A5A6 100%);
      border-radius: 30px;
      padding: 6px;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      gap: 0;
    }
    
    .toggle-option {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      padding: 12px 24px;
      border-radius: 24px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-family: 'Nunito', sans-serif;
      font-weight: 800;
      font-size: 18px;
      color: #7F8C8D;
    }
    
    .toggle-option.active-good {
      background: linear-gradient(180deg, #3498DB 0%, #2980B9 100%);
      color: #fff;
      box-shadow: 0 4px 10px rgba(52, 152, 219, 0.4);
    }
    
    .toggle-option.active-bad {
      background: linear-gradient(180deg, #E74C3C 0%, #C0392B 100%);
      color: #fff;
      box-shadow: 0 4px 10px rgba(231, 76, 60, 0.4);
    }
    
    .toggle-emoji {
      font-size: 24px;
    }
    
    /* ==========================================
       WIN POPUP
       ========================================== */
    #win-popup {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10000;
    }
    
    #win-popup.show {
      display: flex;
    }
    
    .win-content {
      background: linear-gradient(180deg, #5DADE2 0%, #3498DB 100%);
      border-radius: 30px;
      padding: 30px 40px;
      text-align: center;
      max-width: 320px;
      width: 90%;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      border: 4px solid rgba(255,255,255,0.3);
    }
    
    .win-title {
      font-family: 'Nunito', sans-serif;
      font-weight: 900;
      font-size: 28px;
      color: #fff;
      margin: 0 0 20px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .win-icon {
      font-size: 60px;
      margin-bottom: 15px;
    }
    
    .win-message {
      font-family: 'Nunito', sans-serif;
      font-size: 16px;
      color: #fff;
      margin-bottom: 25px;
    }
    
    .win-button {
      background: linear-gradient(180deg, #27AE60 0%, #1E8449 100%);
      color: #fff;
      font-family: 'Nunito', sans-serif;
      font-weight: 800;
      font-size: 20px;
      padding: 15px 40px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4);
      transition: transform 0.2s ease;
    }
    
    .win-button:active {
      transform: scale(0.95);
    }
    
    /* ==========================================
       LOSE POPUP
       ========================================== */
    #lose-popup {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 10000;
    }
    
    #lose-popup.show {
      display: flex;
    }
    
    .lose-content {
      background: linear-gradient(180deg, #E74C3C 0%, #C0392B 100%);
      border-radius: 30px;
      padding: 30px 40px;
      text-align: center;
      max-width: 320px;
      width: 90%;
      box-shadow: 0 10px 40px rgba(0,0,0,0.3);
      border: 4px solid rgba(255,255,255,0.3);
    }
    
    .lose-title {
      font-family: 'Nunito', sans-serif;
      font-weight: 900;
      font-size: 28px;
      color: #fff;
      margin: 0 0 20px 0;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .lose-button {
      background: linear-gradient(180deg, #95A5A6 0%, #7F8C8D 100%);
      color: #fff;
      font-family: 'Nunito', sans-serif;
      font-weight: 800;
      font-size: 20px;
      padding: 15px 40px;
      border: none;
      border-radius: 25px;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(0,0,0,0.2);
      transition: transform 0.2s ease;
    }
    
    .lose-button:active {
      transform: scale(0.95);
    }
    
    /* ==========================================
       BANNER MESSAGES
       ========================================== */
    .game-banner {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: linear-gradient(180deg, #3498DB 0%, #2980B9 100%);
      color: #fff;
      font-family: 'Nunito', sans-serif;
      font-weight: 900;
      font-size: 24px;
      padding: 20px 40px;
      border-radius: 15px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.3);
      z-index: 5000;
      display: none;
      text-align: center;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    
    .game-banner.show {
      display: block;
      animation: bannerPop 0.3s ease;
    }
    
    @keyframes bannerPop {
      0% { transform: translate(-50%, -50%) scale(0.8); opacity: 0; }
      100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
    }
    
    /* ==========================================
       NAVIGATION (HIDDEN - using toggle instead)
       ========================================== */
    .nav-container {
      display: none;
    }
    
    /* ==========================================
       RESPONSIVE ADJUSTMENTS
       ========================================== */
    @media (max-width: 380px) {
      .level-title {
        font-size: 26px;
      }
      
      .progress-bar-wrapper {
        width: 150px;
        height: 24px;
      }
      
      .progress-text {
        font-size: 16px;
        width: 150px;
        line-height: 24px;
      }
      
      .toggle-option {
        padding: 10px 18px;
        font-size: 16px;
      }
      
      .toggle-emoji {
        font-size: 20px;
      }
    }
    
    @media (min-width: 768px) {
      .level-title {
        font-size: 40px;
      }
      
      .progress-bar-wrapper {
        width: 250px;
        height: 35px;
      }
      
      .progress-text {
        font-size: 24px;
        width: 250px;
        line-height: 35px;
      }
    }
    
    /* Hide old level display */
    #level-display {
      display: none !important;
    }
  </style>
  <script>
    // ==========================================
    // LEVEL PROGRESSION SYSTEM
    // Total levels played tracking - continues past 50
    // ==========================================
    const TOTAL_PUZZLES = 50;

    // Get the total level number (1, 2, 3... 50, 51, 52...)
    function getTotalLevel() {
      return parseInt(localStorage.getItem('cluesbysam_total_level') || '1');
    }

    function setTotalLevel(level) {
      localStorage.setItem('cluesbysam_total_level', level.toString());
    }

    // Get which puzzle to load (1-50, cycling)
    function getPuzzleNumber(totalLevel) {
      return ((totalLevel - 1) % TOTAL_PUZZLES) + 1;
    }

    // Obfuscated puzzle hash map - only you know these!
    const PUZZLE_HASHES = {
      1: "8aa15091a232", 2: "bad1fcbd0ec5", 3: "684233c01fca", 4: "23c43dbe2a37", 5: "9c53c1ae5344",
      6: "78e820375276", 7: "de6c2fb44bd1", 8: "b6b573e8de8e", 9: "da0bb9fb2cd9", 10: "6baae50faf8a",
      11: "6cbf6d256778", 12: "b7b982ec1191", 13: "656f4ab5e464", 14: "f3042cb0f5ec", 15: "6c1a70232b95",
      16: "d6235521a569", 17: "21493e6b6140", 18: "703916bb416d", 19: "5a5aa0bd997c", 20: "98c74c6d6e44",
      21: "51f3ecf10a81", 22: "e8dde6ff8dc1", 23: "6efda75291c8", 24: "63b339a39097", 25: "175ca6478890",
      26: "262ff76dcd13", 27: "ed23e2304ae8", 28: "bb3664b02089", 29: "2f42fbfcdaf9", 30: "c629d699bf3c",
      31: "521c0eb12288", 32: "83f5e2a2c9d3", 33: "92471ae08a9c", 34: "11cb6872e594", 35: "48ce3cb8cfbd",
      36: "c72891018b1b", 37: "4d49ca3e2134", 38: "5ea3be3177d5", 39: "b3eef6f8d2bb", 40: "6e2c04ee211d",
      41: "6310edfd1b2b", 42: "d9e838da8fb9", 43: "ab644e25dde8", 44: "d645485f7161", 45: "5e9419f2e0fa",
      46: "5096b4d921c5", 47: "dae6db907d2b", 48: "43537ae10d78", 49: "5220a658f51b", 50: "165362d90111"
    };

    function loadLevel(totalLevel) {
      const puzzleNum = getPuzzleNumber(totalLevel);
      const hash = PUZZLE_HASHES[puzzleNum];
      const scriptPath = `./game/assets/${hash}.js`;
      console.log(`Loading Level ${totalLevel}: ${scriptPath}`);

      const script = document.createElement('script');
      script.type = 'module';
      script.crossOrigin = 'anonymous';
      script.src = scriptPath;
      document.head.appendChild(script);
    }

    // ==========================================
    // SPLASH SCREEN
    // ==========================================
    function hideSplash() {
      const splash = document.getElementById('splash-screen');
      if (splash) {
        splash.classList.add('hidden');
        setTimeout(() => {
          splash.style.display = 'none';
        }, 500);
      }
    }

    function animateSplashProgress() {
      const progressBar = document.querySelector('.splash-progress-bar');
      if (progressBar) {
        let progress = 0;
        const interval = setInterval(() => {
          progress += Math.random() * 35 + 25;
          if (progress >= 100) {
            progress = 100;
            clearInterval(interval);
            setTimeout(hideSplash, 100);
          }
          progressBar.style.width = progress + '%';
        }, 80);
      }
    }

    // ==========================================
    // PROGRESS TRACKING
    // ==========================================
    let totalCards = 0;
    let clearedCards = 0;

    function updateProgress() {
      const progressFill = document.querySelector('.progress-bar-fill');
      const progressText = document.querySelector('.progress-text');
      if (progressFill && progressText) {
        const percent = totalCards > 0 ? (clearedCards / totalCards) * 100 : 0;
        progressFill.style.width = percent + '%';
        progressText.textContent = `${clearedCards}/${totalCards}`;
      }
    }

    function countCards() {
      const cards = document.querySelectorAll('.card');
      totalCards = cards.length;
      clearedCards = document.querySelectorAll('.card.innocent, .card.criminal').length;
      updateProgress();
    }

    // ==========================================
    // GOOD/BAD TOGGLE
    // ==========================================
    let currentMode = 'good'; // 'good' or 'bad'

    function setMode(mode) {
      currentMode = mode;
      const goodOption = document.querySelector('.toggle-good');
      const badOption = document.querySelector('.toggle-bad');
      
      if (mode === 'good') {
        goodOption.classList.add('active-good');
        goodOption.classList.remove('active-bad');
        badOption.classList.remove('active-good');
        badOption.classList.remove('active-bad');
        document.body.style.background = 'linear-gradient(180deg, #A8E6CF 0%, #D4EFFF 30%, #D4EFFF 100%)';
      } else {
        badOption.classList.add('active-bad');
        badOption.classList.remove('active-good');
        goodOption.classList.remove('active-good');
        goodOption.classList.remove('active-bad');
        document.body.style.background = 'linear-gradient(180deg, #FFCDD2 0%, #FFE4EC 30%, #FFE4EC 100%)';
      }
    }

    // ==========================================
    // WIN/LOSE POPUPS
    // ==========================================
    function showWinPopup() {
      const popup = document.getElementById('win-popup');
      if (popup) popup.classList.add('show');
    }

    function hideWinPopup() {
      const popup = document.getElementById('win-popup');
      if (popup) popup.classList.remove('show');
      goToNextLevel();
    }

    function showLosePopup() {
      const popup = document.getElementById('lose-popup');
      if (popup) popup.classList.add('show');
    }

    function hideLosePopup() {
      const popup = document.getElementById('lose-popup');
      if (popup) popup.classList.remove('show');
    }

    // ==========================================
    // THEME SYSTEM
    // ==========================================
    function callShare() {
      window.share(true);
    }

    const THEMES = ["theme-default", "theme-acc-1"];

    function convert(savedTheme) {
      if (savedTheme == "theme-default") return { theme: 0, dark: true };
      if (savedTheme == "theme-acc-1") return { theme: 1, dark: true };
      else return { theme: 0, dark: true };
    }

    document.addEventListener("DOMContentLoaded", () => {
      console.log("Load");
      
      // Start splash animation
      animateSplashProgress();
      
      const themePreference = convert(localStorage.getItem("theme"));
      document.body.className = `${THEMES[themePreference.theme]} ${themePreference.dark ? "light" : "light"}`;

      // Update level display
      const totalLevel = getTotalLevel();
      const levelTitle = document.querySelector('.level-title');
      if (levelTitle) {
        levelTitle.textContent = `Level ${totalLevel}`;
      }

      // Initialize toggle
      setMode('good');
      
      // Monitor for card changes to update progress
      setInterval(() => {
        countCards();
      }, 500);

      // Replace "Puzzle #X" text in the game with actual level number
      replacePuzzleText(totalLevel);
    });

    // Replace "Puzzle #X" text in the game
    function replacePuzzleText(totalLevel) {
      setInterval(() => {
        // Find all text nodes and elements containing "Puzzle #"
        const walker = document.createTreeWalker(
          document.body,
          NodeFilter.SHOW_TEXT,
          null,
          false
        );

        let node;
        while (node = walker.nextNode()) {
          if (node.nodeValue && node.nodeValue.match(/Puzzle #\d+/)) {
            node.nodeValue = node.nodeValue.replace(/Puzzle #\d+/, `Level ${totalLevel}`);
          }
        }
      }, 500);
    }

    // ==========================================
    // LEVEL NAVIGATION
    // ==========================================
    function goToNextLevel() {
      const current = getTotalLevel();
      setTotalLevel(current + 1);
      location.reload();
    }

    function goToPrevLevel() {
      const current = getTotalLevel();
      if (current > 1) {
        setTotalLevel(current - 1);
        location.reload();
      }
    }

    // Load the current level's script
    loadLevel(getTotalLevel());
  </script>
  <link rel="stylesheet" crossorigin href="./assets/index.css">
</head>

<body class="theme-default">
  <!-- SPLASH SCREEN -->
  <div id="splash-screen">
    <div class="splash-icon">üîç</div>
    <div class="splash-logo">Clues<br>by Sam</div>
    <div class="splash-text">Preparing clues for you, please wait...</div>
    <div class="splash-progress">
      <div class="splash-progress-bar"></div>
    </div>
  </div>

  <div id="fontPreload" style="position: absolute; top: -9999px; font-family: 'Ribeye'">Loading...</div>
  <div id="fontPreload" style="position: absolute; top: -9999px; font-family: 'Comic Neue'">Loading...</div>
  <div id="fontPreload" style="position: absolute; top: -9999px; font-family: 'Nunito'">Loading...</div>

  <!-- NEW HEADER -->
  <div class="game-header">
    <h1 class="level-title">Level 1</h1>
    <div class="progress-container">
      <div class="progress-bar-wrapper">
        <div class="progress-bar-inner">
          <div class="progress-bar-fill"></div>
          <div class="progress-text">0/0</div>
        </div>
      </div>
    </div>
  </div>

  <!-- OLD LEVEL DISPLAY (HIDDEN) -->
  <div id="level-display"><b>Level 1</b></div>

  <!-- GAME CONTAINER -->
  <div id="root"></div>

  <!-- GOOD/BAD TOGGLE -->
  <div class="toggle-container">
    <div class="toggle-pill">
      <div class="toggle-option toggle-good active-good" onclick="setMode('good')">
        <span class="toggle-emoji">üòê</span>
        <span>Good</span>
      </div>
      <div class="toggle-option toggle-bad" onclick="setMode('bad')">
        <span class="toggle-emoji">üòà</span>
        <span>Bad</span>
      </div>
    </div>
  </div>

  <!-- WIN POPUP -->
  <div id="win-popup">
    <div class="win-content">
      <div class="win-icon">üéâ</div>
      <h2 class="win-title">Level Complete!</h2>
      <p class="win-message">Great job solving the puzzle!</p>
      <button class="win-button" onclick="hideWinPopup()">Next Level</button>
    </div>
  </div>

  <!-- LOSE POPUP -->
  <div id="lose-popup">
    <div class="lose-content">
      <div class="win-icon">üò¢</div>
      <h2 class="lose-title">Try Again!</h2>
      <p class="win-message">Don't worry, you can retry this level.</p>
      <button class="lose-button" onclick="hideLosePopup()">Retry</button>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      if (window.Capacitor && window.Capacitor.Plugins && window.Capacitor.Plugins.App) {
        var App = window.Capacitor.Plugins.App;
        App.addListener('backButton', function(data) {
          if (data.canGoBack) {
            window.history.back();
          } else {
            App.exitApp();
          }
        });
      }
    });
  </script>
</body>

</html>